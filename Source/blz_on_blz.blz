require code_gen
require config
require lexer
require parser
require source_file
# This is the entrypoint of the compiler

:main
    config = Config()
    if config.source_files.length() != 1
        throw "Expected only one main source file"
    end
    primary_source = read_source(config.source_files[0])
    tokens = lex(primary_source, config)
    tree = parse(tokens, config)
    gen_output(tree, config)
end
